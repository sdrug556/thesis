{"version":3,"file":"index.esm.js","sources":["../src/utils/has-own-property.ts","../src/utils/options.ts","../src/utils/message.ts","../src/module.ts","../src/check.ts"],"sourcesContent":["/*\n * Copyright (c) 2022.\n * Author Peter Placzek (tada5hi)\n * For the full copyright and license information,\n * view the LICENSE file that was distributed with this source code.\n */\n\nexport function hasOwnProperty<X extends Record<string, any>, Y extends PropertyKey>(obj: X, prop: Y): obj is X & Record<Y, unknown> {\n    return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n","/*\n * Copyright (c) 2021-2022.\n * Author Peter Placzek (tada5hi)\n * For the full copyright and license information,\n * view the LICENSE file that was distributed with this source code.\n */\n\nimport { merge } from 'smob';\nimport { Options } from '../type';\n\n/**\n * Deep merge two objects.\n * @param target\n * @param sources\n */\nexport function mergeOptions(\n    target: Options,\n    ...sources: Options[]\n) : Options {\n    return merge(target, ...sources);\n}\n\nexport function buildOptions(\n    data?: string | Error | Options,\n    options?: Options,\n) : Options {\n    if (typeof data === 'undefined') {\n        data = {};\n    }\n\n    if (typeof options === 'undefined') {\n        options = {};\n    }\n\n    if (\n        !(data instanceof Error) &&\n        typeof data !== 'string'\n    ) {\n        options = mergeOptions({}, data, { ...options });\n    }\n\n    if (\n        !options.previous &&\n        data instanceof Error\n    ) {\n        options.previous = data;\n    }\n\n    return options;\n}\n","/*\n * Copyright (c) 2022-2022.\n * Author Peter Placzek (tada5hi)\n * For the full copyright and license information,\n * view the LICENSE file that was distributed with this source code.\n */\n\nimport { Options } from '../type';\n\nexport function buildMessage(\n    data?: string | Error | Options,\n    options?: Options,\n) : string | undefined {\n    if (typeof data === 'undefined') {\n        data = {};\n    }\n\n    if (typeof options === 'undefined') {\n        options = {};\n    }\n\n    let message : string | undefined;\n\n    if (typeof data === 'string') {\n        message = data;\n    }\n\n    if (\n        !message &&\n        options.message\n    ) {\n        message = options.message;\n    }\n\n    if (\n        !message &&\n        !options.decorateMessage\n    ) {\n        if (data instanceof Error) {\n            /* istanbul ignore next */\n            message = data.message;\n        } else if (options.previous instanceof Error) {\n            message = options.previous.message;\n        }\n    }\n\n    return message;\n}\n","/*\n * Copyright (c) 2022.\n * Author Peter Placzek (tada5hi)\n * For the full copyright and license information,\n * view the LICENSE file that was distributed with this source code.\n */\n\nimport { Options } from './type';\nimport { buildMessage, buildOptions, hasOwnProperty } from './utils';\n\nexport class BaseError extends Error {\n    public readonly options: Options;\n\n    //--------------------------------------------------------------------\n\n    constructor(\n        data?: string | Error | Options,\n        options?: Options,\n    ) {\n        options = buildOptions(data, options);\n        const message = buildMessage(data, options);\n\n        super(message);\n\n        if (this.name === undefined || this.name === 'Error') {\n            Object.defineProperty(this, 'name', {\n                configurable: true,\n                enumerable: false,\n                value: this.constructor.name,\n                writable: true,\n            });\n        }\n\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n        }\n\n        /* istanbul ignore next */\n        if (typeof this.stack === 'undefined' || this.stack === '') {\n            this.stack = new Error(message).stack;\n        }\n\n        this.options = {};\n        this.setOptions(options);\n    }\n\n    //--------------------------------------------------------------------\n\n    public getOptions(): Options {\n        return this.options;\n    }\n\n    public getOption<T extends keyof Options>(key: T): Options[T] | undefined {\n        return this.options[key];\n    }\n\n    //--------------------------------------------------------------------\n\n    setOptions(options?: Options): void {\n        if (typeof options === 'undefined') {\n            options = {};\n        }\n\n        const keys = Object.keys(options);\n        for (let i = 0; i < keys.length; i++) {\n            this.setOption(keys[i], options[keys[i]]);\n        }\n    }\n\n    public setOption<T extends keyof Options>(key: T, value: Options[T]) {\n        Object.assign(this.options, { [key]: value });\n    }\n\n    public unsetOption<T extends keyof Options>(key: T) {\n        if (hasOwnProperty(this.options, key)) {\n            delete this.options[key];\n        }\n    }\n}\n","/*\n * Copyright (c) 2022-2022.\n * Author Peter Placzek (tada5hi)\n * For the full copyright and license information,\n * view the LICENSE file that was distributed with this source code.\n */\n\nimport { BaseError } from './module';\nimport { hasOwnProperty } from './utils';\n\nfunction isObject(item: unknown) : item is Record<string, any> {\n    return (!!item && typeof item === 'object' && !Array.isArray(item));\n}\n\nfunction isFunction(item: unknown) : item is CallableFunction {\n    return typeof item === 'function';\n}\n\nexport function extendsBaseError<T extends BaseError = BaseError>(error: unknown) : error is T {\n    if (error instanceof BaseError) {\n        return true;\n    }\n\n    return !!(isObject(error) &&\n        hasOwnProperty(error, 'options') &&\n        isObject(error.options) &&\n        hasOwnProperty(error, 'getOption') &&\n        isFunction(error.getOption) &&\n        hasOwnProperty(error, 'getOptions') &&\n        isFunction(error.getOptions));\n}\n"],"names":["hasOwnProperty","obj","prop","Object","prototype","call","mergeOptions","target","sources","merge","buildOptions","data","options","Error","previous","buildMessage","message","decorateMessage","BaseError","name","undefined","defineProperty","configurable","enumerable","value","constructor","writable","captureStackTrace","stack","setOptions","key","keys","i","length","setOption","assign","isObject","item","Array","isArray","isFunction","extendsBaseError","error","getOption","getOptions"],"mappings":"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"}